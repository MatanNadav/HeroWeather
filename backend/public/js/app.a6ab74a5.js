(function(t){function e(e){for(var n,s,i=e[0],c=e[1],u=e[2],f=0,p=[];f<i.length;f++)s=i[f],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&p.push(o[s][0]),o[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);l&&l(e);while(p.length)p.shift()();return a.push.apply(a,u||[]),r()}function r(){for(var t,e=0;e<a.length;e++){for(var r=a[e],n=!0,i=1;i<r.length;i++){var c=r[i];0!==o[c]&&(n=!1)}n&&(a.splice(e--,1),t=s(s.s=r[0]))}return t}var n={},o={app:0},a=[];function s(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=n,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(r,n,function(e){return t[e]}.bind(null,n));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=c;a.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"034f":function(t,e,r){"use strict";var n=r("85ec"),o=r.n(n);o.a},"0615":function(t,e,r){"use strict";var n=r("28cf"),o=r.n(n);o.a},"17e8":function(t,e,r){},2459:function(t,e,r){"use strict";var n=r("76cb"),o=r.n(n);o.a},"28cf":function(t,e,r){},"2ad3":function(t,e,r){"use strict";var n=r("393c"),o=r.n(n);o.a},"2b6b":function(t,e,r){t.exports=r.p+"img/Loader.0b21d95f.svg"},"324a":function(t,e,r){"use strict";var n=r("5e19"),o=r.n(n);o.a},"393c":function(t,e,r){},"46a3":function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("router-view"),t.isLoading?r("Loader"):t._e()],1)},a=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"loader-container flex center"},[n("section",{staticClass:"loader-svg-container flex column center"},[n("img",{staticClass:"loader-svg",attrs:{src:r("2b6b"),alt:"Loader"}}),0===t.counter?n("p",{staticClass:"loader-text"},[t._v("Getting City's current weather")]):t._e(),1===t.counter?n("p",{staticClass:"loader-text"},[t._v("Searching for City's photos")]):t._e(),t.counter>=2?n("p",{staticClass:"loader-text"},[t._v("Updating interface")]):t._e()])])},i=[],c={data:function(){return{counter:0,interval:null}},computed:{},mounted:function(){var t=this;this.interval=setInterval((function(){t.counter++}),1200)},destroyed:function(){clearInterval(this.interval),this.counter=0}},u=c,l=(r("0615"),r("2877")),f=Object(l["a"])(u,s,i,!1,null,"158cf0a7",null),p=f.exports,h={data:function(){return{}},computed:{isLoading:function(){return this.$store.getters.getLoading}},components:{Loader:p}},d=h,m=(r("034f"),Object(l["a"])(d,o,a,!1,null,null,null)),g=m.exports,v=r("8c4f"),y=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.isLoading?t._e():r("section",{staticClass:"home-container"},[r("AppHeader",{on:{"emit-filter":t.setFilter}}),r("WeatherPreview",{attrs:{weather:t.weatherForDisplay,forecast:t.forecastForDisplay,cityName:t.cityNameToRender}}),r("section",{staticClass:"photos-list-container"},[r("PhotosList",{attrs:{photos:t.photosForDisplay}})],1)],1)},w=[],b=(r("96cf"),r("1da1")),x=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("nav",{staticClass:"nav-contianer flex row space-between center"},[r("li",{staticClass:"nav-item flex align-center justify-center"},[r("WeatherFilter",{on:{"emit-filter":t.emitFilter}})],1)])},C=[],_=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"filter-container"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.filterBy.txt,expression:"filterBy.txt"}],staticClass:"filter-input",attrs:{type:"text",placeholder:"City search"},domProps:{value:t.filterBy.txt},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.emitFilter(e)},input:function(e){e.target.composing||t.$set(t.filterBy,"txt",e.target.value)}}})])},P=[],k={data:function(){return{filterBy:{txt:""}}},methods:{emitFilter:function(){this.$emit("emit-filter",this.filterBy),this.filterBy={txt:""}}}},O=k,L=(r("f1d4"),Object(l["a"])(O,_,P,!1,null,"10e5bc8b",null)),j=L.exports,F={methods:{emitFilter:function(t){this.$emit("emit-filter",t)}},components:{WeatherFilter:j}},N=F,$=(r("324a"),Object(l["a"])(N,x,C,!1,null,"c3c9cf3c",null)),D=$.exports,M=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.weather?r("section",{staticClass:"weather-preview-container"},[r("section",{staticClass:"weather-head-container flex align-center space-around"},[r("img",{staticClass:"svg-background",attrs:{src:t.getIcon,alt:"SVG"}}),r("img",{staticClass:"background-city",attrs:{src:t.getBackground,alt:"background"}}),r("div",{staticClass:"head-details-container flex column space-around"},[r("p",{staticClass:"city-name temperature-container"},[t._v(t._s(t.cityName)+" - "+t._s(t.weather.Temperature.Metric.Value)+" ")]),r("p",{staticClass:"weather-text"},[t._v(t._s(t.weather.WeatherText))])])]),r("section",{staticClass:"forecast-container"},t._l(t.forecast.DailyForecasts,(function(t){return r("ForecastPreview",{key:t.date,attrs:{day:t}})})),1)]):r("section",[r("p",{staticClass:"city-name"},[t._v("Choose a location")])])},W=[],R=(r("99af"),r("4160"),r("caad"),r("ac1f"),r("2532"),r("1276"),r("159b"),r("bc3a")),B=r.n(R),S="/api/",I=B.a.create({withCredentials:!0}),T={fetchCurrWeather:E,getPhotos:q,getWeatherIcon:J,getNextPage:V};function E(){return A.apply(this,arguments)}function A(){return A=Object(b["a"])(regeneratorRuntime.mark((function t(){var e,r,n,o=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=o.length>0&&void 0!==o[0]?o[0]:"London",r="?q=".concat(e),t.next=4,I.get("".concat(S,"weather")+r);case 4:if(n=t.sent,!n.data.weather[0]){t.next=9;break}return t.abrupt("return",n.data);case 9:return t.abrupt("return",null);case 10:case"end":return t.stop()}}),t)}))),A.apply(this,arguments)}function q(){return H.apply(this,arguments)}function H(){return H=Object(b["a"])(regeneratorRuntime.mark((function t(){var e,r,n,o=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=o.length>0&&void 0!==o[0]?o[0]:"London",r="?q=".concat(e),t.next=4,I.get("".concat(S,"photos")+r);case 4:return n=t.sent,t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)}))),H.apply(this,arguments)}function V(t){return G.apply(this,arguments)}function G(){return G=Object(b["a"])(regeneratorRuntime.mark((function t(e){var r,n,o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.city,n=e.pageNum,o="?q=".concat(r,"&page=").concat(n),t.next=4,I.get("".concat(S,"photos")+o);case 4:return a=t.sent,t.abrupt("return",a);case 6:case"end":return t.stop()}}),t)}))),G.apply(this,arguments)}function J(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sun",e=t.toLowerCase().split(" ");if("clear"===e[0])return r("cecf");var n="";return e.forEach((function(t){return t.includes("part")?n+="part":t.includes("sun")?n+="sun":t.includes("cloud")?n+="cloud":t.includes("rain")||t.includes("shower")?n+="rain":t.includes("snow")?n+="snow":void 0})),r("partsun"===n||"suncloud"===n?"c5bc":"sun"===n?"cecf":"sunrain"===n||"cloudrain"===n||"partsunrain"===n||"rain"===n?"fe4a":"sunsnow"===n||"cloudsnow"===n||"snow"===n?"f513":"c5bc")}var U=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"forecast-preview-container flex column"},[r("div",{staticClass:"forecast-animation-container"},[r("img",{staticClass:"forecast-animation",attrs:{src:t.getDayIcon,alt:"Day Icon"}})]),r("section",{staticClass:"forecast-text-container flex column space-around"},[r("h5",{staticClass:"forecast-title"},[t._v(t._s(t.day.Day.IconPhrase))]),r("p",{staticClass:"forecast-text"},[t._v(t._s(t.getDate))]),r("p",{staticClass:"forecast-text temp"},[t._v("High: "+t._s(t.day.Temperature.Maximum.Value))]),r("p",{staticClass:"forecast-text temp"},[t._v("Low: "+t._s(t.day.Temperature.Minimum.Value))])])])},X=[],z={props:["day"],computed:{getDayIcon:function(){var t=this.day.Day.IconPhrase.toLowerCase();return T.getWeatherIcon(t)},getDate:function(){var t=new Date(this.day.Date).toUTCString();return t.substring(0,t.length-12)}}},K=z,Q=(r("2ad3"),Object(l["a"])(K,U,X,!1,null,"0f21f4a2",null)),Y=Q.exports,Z={props:{weather:Object,forecast:Object,cityName:String},computed:{getIcon:function(){var t=this.weather.WeatherText;return T.getWeatherIcon(t)},getBackground:function(){var t=this.$store.getters.getBackgroundPhoto,e=t.src.original;return e+"?auto=compress&cs=tinysrgb&fit=crop&h=".concat(screen.height,"&w=").concat(screen.width)}},components:{ForecastPreview:Y}},tt=Z,et=(r("6778"),Object(l["a"])(tt,M,W,!1,null,"40183cb4",null)),rt=et.exports,nt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.photos?r("section",{staticClass:"photo-list-container"},[r("section",{staticClass:"photo-preview-container"},t._l(t.photos,(function(t){return r("PhotoPreview",{key:t.id,attrs:{photo:t}})})),1),r("button",{staticClass:"scroll-top",class:{show:t.isActive},on:{click:t.scrollToTop}},[t._v("Back to top")]),r("footer",{ref:"footer",staticClass:"footer"})]):t._e()},ot=[],at=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"photo-container"},[r("img",{attrs:{src:t.photo.src.medium,alt:"thumb"},on:{click:t.toggleModal}}),t.isModal?r("Modal",{attrs:{photo:t.photo},on:{"close-modal":t.toggleModal}}):t._e()],1)},st=[],it=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.photo?r("section",{staticClass:"modal-container flex center"},[r("img",{staticClass:"modal-photo",attrs:{src:t.photo.src.large,alt:"photo"}}),r("p",{staticClass:"modal-credit"},[t._v("Photographer: "+t._s(t.photo.photographer))]),r("span",{staticClass:"close-modal",on:{click:t.closeModal}},[t._v("X")]),r("div",{staticClass:"modal-bg-container",on:{click:t.closeModal}})]):t._e()},ct=[],ut={props:["photo"],methods:{closeModal:function(){this.$emit("close-modal")}}},lt=ut,ft=(r("2459"),Object(l["a"])(lt,it,ct,!1,null,"27c61709",null)),pt=ft.exports,ht={data:function(){return{isModal:!1}},props:["photo"],computed:{},methods:{toggleModal:function(){this.isModal=!this.isModal}},components:{Modal:pt}},dt=ht,mt=(r("8567"),Object(l["a"])(dt,at,st,!1,null,"88aa635e",null)),gt=mt.exports,vt={data:function(){return{options:{root:null,rootMargins:"0px",threshold:.5},observer:null,isActive:!1}},props:["photos"],methods:{handleIntersect:function(t){t[0].isIntersecting&&(this.$store.dispatch({type:"fetchNextPage"}),this.isActive=!0)},scrollToTop:function(){window.scrollTo({top:0,right:0,behavior:"smooth"}),this.isActive=!1}},mounted:function(){this.observer=new IntersectionObserver(this.handleIntersect,this.options),this.observer.observe(this.$refs.footer)},components:{PhotoPreview:gt}},yt=vt,wt=(r("8d35"),Object(l["a"])(yt,nt,ot,!1,null,"546264ab",null)),bt=wt.exports,xt={data:function(){return{isLoading:!1}},computed:{weatherForDisplay:function(){var t=this.$store.getters.weatherForDisplay;return t[0]},forecastForDisplay:function(){var t=this.$store.getters.forecastForDisplay;return t},cityNameToRender:function(){return this.$store.getters.getCityName},photosForDisplay:function(){var t=this.$store.getters.photosForDisplay;return t[0]}},methods:{loadWeather:function(){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.next=3,t.$store.dispatch({type:"loadWeather"});case 3:return e.next=5,t.$store.dispatch({type:"fetchPhotos"});case 5:t.isLoading=!1;case 6:case"end":return e.stop()}}),e)})))()},setFilter:function(t){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:e.isLoading=!0,e.$store.commit("setStoreFilter",t.txt),e.loadWeather(),e.isLoading=!1;case 4:case"end":return r.stop()}}),r)})))()}},created:function(){this.loadWeather()},components:{AppHeader:D,WeatherPreview:rt,PhotosList:bt}},Ct=xt,_t=(r("808d"),Object(l["a"])(Ct,y,w,!1,null,"1a472706",null)),Pt=_t.exports;n["a"].use(v["a"]);var kt=[{path:"/",name:"Home",component:Pt}],Ot=new v["a"]({mode:"history",base:"/",routes:kt}),Lt=Ot,jt=r("2f62");n["a"].use(jt["a"]);var Ft=new jt["a"].Store({state:{filterBy:{txt:"London"},currWeather:{},currForecast:{},currCity:"",cityPhotos:[],nextPageNum:null,isLoading:!1},getters:{weatherForDisplay:function(t){return t.currWeather},forecastForDisplay:function(t){return t.currForecast},getCityName:function(t){return t.currCity},getCityPhotos:function(t){return t.cityPhotos},photosForDisplay:function(t){return t.cityPhotos},getBackgroundPhoto:function(t){var e=Math.floor(Math.random(t.cityPhotos.length));return t.cityPhotos[0][e]},getLoading:function(t){return t.isLoading}},mutations:{setStoreFilter:function(t,e){t.filterBy={txt:e}},setCurrWeather:function(t,e){var r=e.weather;t.currWeather=r},setCurrForecast:function(t,e){var r=e.forecast;t.currForecast=r},setCurrCity:function(t,e){var r=e.cityName;t.currCity=r},setCityPhotos:function(t,e){var r=e.photos;t.cityPhotos=[],t.cityPhotos.push(r.data.photos)},setLoading:function(t,e){var r=e.isLoading;t.isLoading=r},addCityPhotos:function(t,e){var r=e.photos;r.data.photos.forEach((function(e){t.cityPhotos[0].push(e)}))},setNextPageNum:function(t){t.nextPageNum?t.nextPageNum++:t.nextPageNum=2}},actions:{loadWeather:function(t){return Object(b["a"])(regeneratorRuntime.mark((function e(){var r,n,o,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.commit({type:"setLoading",isLoading:!0}),e.next=3,T.fetchCurrWeather(t.state.filterBy.txt);case 3:if(r=e.sent,r){e.next=7;break}return t.commit({type:"setLoading",isLoading:!1}),e.abrupt("return");case 7:n=r.weather,o=r.forecast,a=r.cityName,t.commit({type:"setCurrWeather",weather:n}),t.commit({type:"setCurrForecast",forecast:o}),t.commit({type:"setCurrCity",cityName:a}),t.commit({type:"setLoading",isLoading:!1});case 12:case"end":return e.stop()}}),e)})))()},fetchPhotos:function(t){return Object(b["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,T.getPhotos(t.state.filterBy.txt);case 2:if(r=e.sent,r){e.next=5;break}return e.abrupt("return");case 5:t.commit({type:"setCityPhotos",photos:r}),t.commit({type:"setNextPageNum"});case 7:case"end":return e.stop()}}),e)})))()},fetchNextPage:function(t){return Object(b["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.state.nextPageNum>10)){e.next=2;break}return e.abrupt("return");case 2:return r={city:t.state.filterBy.txt,pageNum:t.state.nextPageNum},e.next=5,T.getNextPage(r);case 5:n=e.sent,t.commit({type:"setNextPageNum"}),t.commit({type:"addCityPhotos",photos:n});case 8:case"end":return e.stop()}}),e)})))()}}}),Nt=r("9483");Object(Nt["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}}),n["a"].config.productionTip=!1,new n["a"]({router:Lt,store:Ft,render:function(t){return t(g)}}).$mount("#app")},"5e19":function(t,e,r){},6556:function(t,e,r){},6778:function(t,e,r){"use strict";var n=r("17e8"),o=r.n(n);o.a},"76cb":function(t,e,r){},"808d":function(t,e,r){"use strict";var n=r("e07d"),o=r.n(n);o.a},8567:function(t,e,r){"use strict";var n=r("91c1"),o=r.n(n);o.a},"85ec":function(t,e,r){},"8d35":function(t,e,r){"use strict";var n=r("6556"),o=r.n(n);o.a},"91c1":function(t,e,r){},c5bc:function(t,e,r){t.exports=r.p+"img/SunCloud.109368f6.svg"},cecf:function(t,e,r){t.exports=r.p+"img/Day.7f93fbdb.svg"},e07d:function(t,e,r){},f1d4:function(t,e,r){"use strict";var n=r("46a3"),o=r.n(n);o.a},f513:function(t,e,r){t.exports=r.p+"img/SunSnow.f78cba60.svg"},fe4a:function(t,e,r){t.exports=r.p+"img/SunRain.f134a51c.svg"}});
//# sourceMappingURL=app.a6ab74a5.js.map