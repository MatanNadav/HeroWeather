(function(t){function e(e){for(var r,s,i=e[0],c=e[1],u=e[2],f=0,p=[];f<i.length;f++)s=i[f],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&p.push(o[s][0]),o[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);l&&l(e);while(p.length)p.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,i=1;i<n.length;i++){var c=n[i];0!==o[c]&&(r=!1)}r&&(a.splice(e--,1),t=s(s.s=n[0]))}return t}var r={},o={app:0},a=[];function s(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=r,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(n,r,function(e){return t[e]}.bind(null,r));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var r=n("85ec"),o=n.n(r);o.a},2100:function(t,e,n){"use strict";var r=n("e164"),o=n.n(r);o.a},"23f0":function(t,e,n){},2459:function(t,e,n){"use strict";var r=n("76cb"),o=n.n(r);o.a},"2b6b":function(t,e,n){t.exports=n.p+"img/Loader.0b21d95f.svg"},3085:function(t,e,n){},"324a":function(t,e,n){"use strict";var r=n("5e19"),o=n.n(r);o.a},"3d74":function(t,e,n){"use strict";var r=n("f304"),o=n.n(r);o.a},"3dbf":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view"),t.isLoading?n("Loader"):t._e()],1)},a=[],s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"loader-container flex center"},[r("section",{staticClass:"loader-svg-container flex column center"},[r("img",{staticClass:"loader-svg",attrs:{src:n("2b6b"),alt:"Loader"}}),0===t.counter?r("p",{staticClass:"loader-text"},[t._v("Getting City's current weather")]):t._e(),1===t.counter?r("p",{staticClass:"loader-text"},[t._v("Searching for City's photos")]):t._e(),t.counter>=2?r("p",{staticClass:"loader-text"},[t._v("Updating interface")]):t._e()])])},i=[],c={data:function(){return{counter:0,interval:null}},computed:{},mounted:function(){var t=this;this.interval=setInterval((function(){t.counter++}),1200)},destroyed:function(){clearInterval(this.interval),this.counter=0}},u=c,l=(n("ac71"),n("2877")),f=Object(l["a"])(u,s,i,!1,null,"72c40c38",null),p=f.exports,d={data:function(){return{}},computed:{isLoading:function(){return this.$store.getters.getLoading}},components:{Loader:p}},h=d,m=(n("034f"),Object(l["a"])(h,o,a,!1,null,null,null)),g=m.exports,v=n("8c4f"),y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isLoading?t._e():n("section",{staticClass:"home-container"},[n("AppHeader",{on:{"emit-filter":t.setFilter}}),n("WeatherPreview",{attrs:{weather:t.weatherForDisplay,forecast:t.forecastForDisplay,cityName:t.cityNameToRender},on:{"pic-loaded":t.shutLoaderOff}}),n("section",{staticClass:"photos-list-container"},[n("PhotosList",{attrs:{photos:t.photosForDisplay}})],1)],1)},b=[],w=(n("96cf"),n("1da1")),x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{staticClass:"nav-contianer flex row space-between center"},[n("li",{staticClass:"nav-item flex align-center justify-center"},[n("WeatherFilter",{on:{"emit-filter":t.emitFilter}})],1)])},C=[],_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"filter-container"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.filterBy.txt,expression:"filterBy.txt"}],staticClass:"filter-input",attrs:{type:"text",placeholder:"City search"},domProps:{value:t.filterBy.txt},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.emitFilter(e)},input:function(e){e.target.composing||t.$set(t.filterBy,"txt",e.target.value)}}})])},P=[],k={data:function(){return{filterBy:{txt:""}}},methods:{emitFilter:function(){this.$emit("emit-filter",this.filterBy),this.filterBy={txt:""}}}},L=k,O=(n("2100"),Object(l["a"])(L,_,P,!1,null,"254b4e8e",null)),j=O.exports,F={methods:{emitFilter:function(t){this.$emit("emit-filter",t)}},components:{WeatherFilter:j}},N=F,$=(n("324a"),Object(l["a"])(N,x,C,!1,null,"c3c9cf3c",null)),D=$.exports,M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.weather?n("section",{staticClass:"weather-preview-container"},[n("section",{staticClass:"weather-head-container flex align-center space-around"},[n("img",{staticClass:"svg-background",attrs:{src:t.getIcon,alt:"SVG"}}),n("img",{staticClass:"background-city",attrs:{src:t.getBackground,alt:"background"},on:{load:t.emitPictureLoaded}}),n("div",{staticClass:"head-details-container flex column space-around"},[n("p",{staticClass:"city-name temperature-container"},[t._v(t._s(t.cityName)+" - "+t._s(t._f("toCel")(t.weather.temp)))]),n("p",{staticClass:"weather-text"},[t._v(t._s(t.weather.main_desc)+" - "+t._s(t._f("getDate")(t.weather.date)))])])]),n("section",{staticClass:"forecast-container"},t._l(t.forecast,(function(t){return n("ForecastPreview",{key:t.date,attrs:{day:t}})})),1)]):n("section",[n("p",{staticClass:"city-name"},[t._v("Choose a location")])])},R=[],W=(n("99af"),n("4160"),n("caad"),n("ac1f"),n("2532"),n("1276"),n("159b"),n("bc3a")),B=n.n(W),S="/api/",E=B.a.create({withCredentials:!0}),I={fetchCurrWeather:T,getPhotos:q,getWeatherIcon:U,getNextPage:G};function T(){return A.apply(this,arguments)}function A(){return A=Object(w["a"])(regeneratorRuntime.mark((function t(){var e,n,r,o=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=o.length>0&&void 0!==o[0]?o[0]:"London",n="?q=".concat(e),t.next=4,E.get("".concat(S,"weather")+n);case 4:if(r=t.sent,!r.data[0]){t.next=9;break}return t.abrupt("return",r.data[0]);case 9:return t.abrupt("return",r.data);case 10:case"end":return t.stop()}}),t)}))),A.apply(this,arguments)}function q(){return H.apply(this,arguments)}function H(){return H=Object(w["a"])(regeneratorRuntime.mark((function t(){var e,n,r,o=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=o.length>0&&void 0!==o[0]?o[0]:"London",n="?q=".concat(e),t.next=4,E.get("".concat(S,"photos")+n);case 4:return r=t.sent,t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)}))),H.apply(this,arguments)}function G(t){return J.apply(this,arguments)}function J(){return J=Object(w["a"])(regeneratorRuntime.mark((function t(e){var n,r,o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.city,r=e.pageNum,o="?q=".concat(n,"&page=").concat(r),t.next=4,E.get("".concat(S,"photos")+o);case 4:return a=t.sent,t.abrupt("return",a);case 6:case"end":return t.stop()}}),t)}))),J.apply(this,arguments)}function U(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sun",e=t.toLowerCase().split(" ");if("clear"===e[0])return n("cecf");var r="";return e.forEach((function(t){return t.includes("part")?r+="part":t.includes("sun")?r+="sun":t.includes("cloud")?r+="cloud":t.includes("rain")||t.includes("shower")?r+="rain":t.includes("snow")?r+="snow":void 0})),n("partsun"===r||"suncloud"===r?"c5bc":"sun"===r?"cecf":"sunrain"===r||"cloudrain"===r||"partsunrain"===r||"rain"===r?"fe4a":"sunsnow"===r||"cloudsnow"===r||"snow"===r?"f513":"c5bc")}var V=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"forecast-preview-container flex column"},[n("div",{staticClass:"forecast-animation-container"},[n("img",{staticClass:"forecast-animation",attrs:{src:t.getDayIcon,alt:"Day Icon"}})]),n("section",{staticClass:"forecast-text-container flex column space-around"},[n("h5",{staticClass:"forecast-title"},[t._v(t._s(t.day.desc))]),n("p",{staticClass:"forecast-text"},[t._v(t._s(t._f("getDate")(t.day.date)))]),n("p",{staticClass:"forecast-text temp"},[t._v("High: "+t._s(t._f("toCel")(t.day.max_temp)))]),n("p",{staticClass:"forecast-text temp"},[t._v("Low: "+t._s(t._f("toCel")(t.day.min_temp)))])])])},X=[],z={props:["day"],computed:{getDayIcon:function(){var t=this.day.desc.toLowerCase();return I.getWeatherIcon(t)}}},K=z,Q=(n("949e"),Object(l["a"])(K,V,X,!1,null,"625b7d6a",null)),Y=Q.exports,Z={props:{weather:Object,forecast:Array,cityName:String},computed:{getIcon:function(){var t=this.weather.main_desc;return I.getWeatherIcon(t)},getBackground:function(){var t=this.$store.getters.getBackgroundPhoto,e=t.src.original;return e+"?auto=compress&cs=tinysrgb&fit=crop&h=".concat(screen.height,"&w=").concat(screen.width)}},methods:{emitPictureLoaded:function(){this.$emit("pic-loaded")}},created:function(){},components:{ForecastPreview:Y}},tt=Z,et=(n("8866"),Object(l["a"])(tt,M,R,!1,null,"3fd00e9e",null)),nt=et.exports,rt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.photos?n("section",{staticClass:"photo-list-container"},[n("section",{staticClass:"photo-preview-container"},t._l(t.photos,(function(t){return n("PhotoPreview",{key:t.id,attrs:{photo:t}})})),1),n("button",{staticClass:"scroll-top",class:{show:t.isActive},on:{click:t.scrollToTop}},[t._v("Top")]),n("footer",{ref:"footer",staticClass:"footer"})]):t._e()},ot=[],at=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"photo-container"},[n("img",{attrs:{src:t.photo.src.medium,alt:"thumb"},on:{click:t.toggleModal}}),t.isModal?n("Modal",{attrs:{photo:t.photo},on:{"close-modal":t.toggleModal}}):t._e()],1)},st=[],it=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.photo?n("section",{staticClass:"modal-container flex center"},[n("img",{staticClass:"modal-photo",attrs:{src:t.photo.src.large,alt:"photo"}}),n("p",{staticClass:"modal-credit"},[t._v("Photographer: "+t._s(t.photo.photographer))]),n("span",{staticClass:"close-modal",on:{click:t.closeModal}},[t._v("X")]),n("div",{staticClass:"modal-bg-container",on:{click:t.closeModal}})]):t._e()},ct=[],ut={props:["photo"],methods:{closeModal:function(){this.$emit("close-modal")}}},lt=ut,ft=(n("2459"),Object(l["a"])(lt,it,ct,!1,null,"27c61709",null)),pt=ft.exports,dt={data:function(){return{isModal:!1}},props:["photo"],computed:{},methods:{toggleModal:function(){this.isModal=!this.isModal}},components:{Modal:pt}},ht=dt,mt=(n("8567"),Object(l["a"])(ht,at,st,!1,null,"88aa635e",null)),gt=mt.exports,vt={name:"PhotoList",data:function(){return{options:{root:null,rootMargins:"0px",threshold:.5},observer:null,isActive:!1}},props:["photos"],methods:{handleIntersect:function(t){t[0].isIntersecting&&(this.$store.dispatch({type:"fetchNextPage"}),this.isActive=!0)},scrollToTop:function(){window.scrollTo({top:0,right:0,behavior:"smooth"}),this.isActive=!1},get:function(){console.log("yoo")}},mounted:function(){this.observer=new IntersectionObserver(this.handleIntersect,this.options),this.observer.observe(this.$refs.footer)},components:{PhotoPreview:gt}},yt=vt,bt=(n("3d74"),Object(l["a"])(yt,rt,ot,!1,null,"df8c5b64",null)),wt=bt.exports,xt={data:function(){return{isLoading:!1}},computed:{weatherForDisplay:function(){var t=this.$store.getters.weatherForDisplay;return t},forecastForDisplay:function(){var t=this.$store.getters.forecastForDisplay;return t},cityNameToRender:function(){return this.$store.getters.getCityName},photosForDisplay:function(){var t=this.$store.getters.photosForDisplay;return t[0]}},methods:{loadWeather:function(){var t=this;return Object(w["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.next=3,t.$store.dispatch({type:"loadWeather"});case 3:return e.next=5,t.$store.dispatch({type:"fetchPhotos"});case 5:t.isLoading=!1;case 6:case"end":return e.stop()}}),e)})))()},setFilter:function(t){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.isLoading=!0,e.$store.commit("setStoreFilter",t.txt),e.loadWeather(),e.isLoading=!1;case 4:case"end":return n.stop()}}),n)})))()},shutLoaderOff:function(){this.$store.commit({type:"setLoading",isLoading:!1})}},created:function(){this.loadWeather()},components:{AppHeader:D,WeatherPreview:nt,PhotosList:wt}},Ct=xt,_t=(n("fe42"),Object(l["a"])(Ct,y,b,!1,null,"5f2a5287",null)),Pt=_t.exports;r["a"].use(v["a"]);var kt=[{path:"/",name:"Home",component:Pt}],Lt=new v["a"]({mode:"history",base:"/",routes:kt}),Ot=Lt,jt=(n("b0c0"),n("2f62"));r["a"].use(jt["a"]);var Ft=new jt["a"].Store({state:{filterBy:{txt:"London"},currWeather:{},currForecast:{},currCity:"",cityPhotos:[],nextPageNum:null,isLoading:!1},getters:{weatherForDisplay:function(t){return t.currWeather},forecastForDisplay:function(t){return t.currForecast},getCityName:function(t){return t.currCity},getCityPhotos:function(t){return t.cityPhotos},photosForDisplay:function(t){return t.cityPhotos},getBackgroundPhoto:function(t){var e=Math.floor(Math.random()*t.cityPhotos[0].length);return t.cityPhotos[0][e]},getLoading:function(t){return t.isLoading}},mutations:{setStoreFilter:function(t,e){t.filterBy={txt:e}},setCurrWeather:function(t,e){var n=e.res;t.currWeather=n},setCurrForecast:function(t,e){var n=e.forecast;t.currForecast=n},setCurrCity:function(t,e){var n=e.cityName;t.currCity=n},setCityPhotos:function(t,e){var n=e.photos;t.cityPhotos=[],t.cityPhotos.push(n.data.photos)},setLoading:function(t,e){var n=e.isLoading;t.isLoading=n},addCityPhotos:function(t,e){var n=e.photos;n.data.photos.forEach((function(e){t.cityPhotos[0].push(e)}))},setNextPageNum:function(t){t.nextPageNum?t.nextPageNum++:t.nextPageNum=2}},actions:{loadWeather:function(t){return Object(w["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.commit({type:"setLoading",isLoading:!0}),e.next=3,I.fetchCurrWeather(t.state.filterBy.txt);case 3:if(n=e.sent,n){e.next=7;break}return t.commit({type:"setLoading",isLoading:!1}),e.abrupt("return");case 7:r=n.forecast,t.commit({type:"setCurrWeather",res:n}),t.commit({type:"setCurrForecast",forecast:r}),t.commit({type:"setCurrCity",cityName:n.name});case 11:case"end":return e.stop()}}),e)})))()},fetchPhotos:function(t){return Object(w["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,I.getPhotos(t.state.filterBy.txt);case 2:if(n=e.sent,n){e.next=5;break}return e.abrupt("return");case 5:t.commit({type:"setCityPhotos",photos:n}),t.commit({type:"setNextPageNum"});case 7:case"end":return e.stop()}}),e)})))()},fetchNextPage:function(t){return Object(w["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.state.nextPageNum>10)){e.next=2;break}return e.abrupt("return");case 2:return n={city:t.state.filterBy.txt,pageNum:t.state.nextPageNum},e.next=5,I.getNextPage(n);case 5:r=e.sent,t.commit({type:"setNextPageNum"}),t.commit({type:"addCityPhotos",photos:r});case 8:case"end":return e.stop()}}),e)})))()}}}),Nt=n("9483");Object(Nt["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});n("4de4");r["a"].filter("toCel",(function(t){var e=Math.round(t-273.15);return e})),r["a"].filter("getDate",(function(t){var e=new Date(1e3*t).toUTCString();return e.substring(0,e.length-12)})),r["a"].config.productionTip=!1,new r["a"]({router:Ot,store:Ft,render:function(t){return t(g)}}).$mount("#app")},"5e19":function(t,e,n){},"76cb":function(t,e,n){},8567:function(t,e,n){"use strict";var r=n("91c1"),o=n.n(r);o.a},"85ec":function(t,e,n){},8866:function(t,e,n){"use strict";var r=n("df4e"),o=n.n(r);o.a},"91c1":function(t,e,n){},"949e":function(t,e,n){"use strict";var r=n("3085"),o=n.n(r);o.a},ac71:function(t,e,n){"use strict";var r=n("3dbf"),o=n.n(r);o.a},c5bc:function(t,e,n){t.exports=n.p+"img/SunCloud.109368f6.svg"},cecf:function(t,e,n){t.exports=n.p+"img/Day.7f93fbdb.svg"},df4e:function(t,e,n){},e164:function(t,e,n){},f304:function(t,e,n){},f513:function(t,e,n){t.exports=n.p+"img/SunSnow.f78cba60.svg"},fe42:function(t,e,n){"use strict";var r=n("23f0"),o=n.n(r);o.a},fe4a:function(t,e,n){t.exports=n.p+"img/SunRain.f134a51c.svg"}});
//# sourceMappingURL=app.199b32a8.js.map